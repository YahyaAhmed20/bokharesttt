{% extends 'base.html' %}
{% block body %}

<div class="container py-5">
    <h2 class="mb-4 text-center text-gold text-shadow">üõí Your Cart</h2>

    {% if cart %}
        <div class="table-responsive shadow rounded overflow-hidden">
            <table class="table table-dark table-bordered table-hover text-center mb-0">
                <thead class="thead-gold bg-black">
                    <tr class="text-uppercase text-gold">
                        <th>Product</th>
                        <th>Price</th>
                        <th>Qty</th>
                        <th>Total</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cart %}
                    <tr>
                        <form method="POST" action="{% url 'menu:update_item' item.id %}">
                            {% csrf_token %}
                            <td class="align-middle">{{ item.name }}</td>
                            <td class="align-middle">{{ item.price }} EGP</td>
                            <td class="align-middle">
                                <input type="number" name="quantity" value="{{ item.quantity }}" min="1"
                                       class="form-control form-control-sm w-50 mx-auto">
                            </td>
                            <td class="align-middle">{{ item.total }} EGP</td>
                            <td class="align-middle">
                                <div class="d-flex justify-content-center gap-2">
                                    <button type="submit" class="btn btn-sm btn-warning">üîÑ Update</button>
                                    <a href="{% url 'menu:remove_item' item.id %}" class="btn btn-sm btn-danger">üóëÔ∏è</a>
                                </div>
                            </td>
                        </form>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="mt-3 text-end">
    <h5 class="text-gold">üí∞ Total: {{ total_price }} EGP</h5>
</div>

            <div class="text-right mt-4">
                <a href="{% url 'menu:menu' %}" class="btn btn-outline-danger btn-sm px-4 me-2">‚ûï Add More Items</a>
            <a href="{% url 'menu:complete_order' %}" class="btn btn-gold btn-sm px-4">‚úÖ Complete Order</a>
            </div>
        </div>
    {% else %}
        <div class="text-center py-5">
            <h5 class="text-muted">üõí Your cart is empty.</h5>
            <a href="{% url 'menu:menu' %}" class="btn btn-gold mt-3">‚¨ÖÔ∏è Back to Menu</a>
        </div>
    {% endif %}
</div>

<style>
    .btn-gold {
        background-color: #d4af37;
        color: #000;
        border: none;
        border-radius: 30px;
        transition: all 0.3s ease;
    }

    .btn-gold:hover {
        background-color: #cfa22f;
        color: #000;
    }

    .text-gold {
        color: #d4af37 !important;
    }

    .thead-gold th {
        background-color: #1c1c1c;
    }

    .text-shadow {
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
    }

    table th, table td {
        vertical-align: middle;
    }
</style>

{% endblock %}
